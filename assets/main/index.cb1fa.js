window.__require=function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){return o(t[r][1][e]||e)},l,l.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({AdsHelper:[function(e,t){"use strict";cc._RF.push(t,"c220fvnZrhN7IAz68k/KCQK","AdsHelper");var i=e("./AnalyticHelper"),n=function(){function e(){this.interstitialLoadedCallback=null,this.interstitialFailedCallback=null,this.interstitialShownCallback=null,this.interstitialClickedCallback=null,this.interstitialDismissedCallback=null,this._removeAllRewardedAdsCallback(),this._retryRewardedAdsHTML5Count=0,this._isDebug=!1;var e=document.createElement("script");e.src="https://embed.gamesnacks.com/assets/js/gamesnacks.js",e.setAttribute("data-environment","test"),e.async=!0,document.head.appendChild(e);var t=document.createElement("iframe");t.sandbox="allow-scripts allow-forms allow-same-origin",t.src=document.URL,document.body.appendChild(t)}var t=e.prototype;return t.prepareAllAds=function(){var e=this;cc.sys.isBrowser?(setTimeout(function(){e.prepareInterstitialAds()},1e3),this.prepareRewardedAds()):(this.prepareInterstitialAds(),this.prepareRewardedAds())},t.prepareInterstitialAds=function(){switch(this._getPlatform()){case"android":jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","prepareInterstitialAds","()V");break;case"ios":jsb.reflection.callStaticMethod("AdManager","prepareInterstitialAds");break;case"browser":this._prepareHTML5InterstitialAds("browse");break;default:console.error("Not support ads for platform")}},t.showInterstitial=function(e){if(e&&(this.interstitialLoadedCallback=e.onInterstitialLoaded,this.interstitialFailedCallback=e.onInterstitialFailed,this.interstitialShownCallback=e.onInterstitialShown,this.interstitialClickedCallback=e.onInterstitialClicked,this.interstitialDismissedCallback=e.onInterstitialDismissed),this._isDebug)return this.onInterstitialDismissed();switch(this._getPlatform()){case"android":jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","showInterstitial","()V");break;case"ios":jsb.reflection.callStaticMethod("AdManager","showInterstitial");break;case"browser":this._showHTML5InterstitialAds({type:"browse",gameFeature:e.gameFeature});break;default:console.error("Not support ads for platform"),this.onInterstitialDismissed()}},t.onInterstitialLoaded=function(){this.interstitialLoadedCallback&&this.interstitialLoadedCallback(),this.interstitialLoadedCallback=null},t.onInterstitialFailed=function(){this.interstitialFailedCallback&&this.interstitialFailedCallback(),this.interstitialFailedCallback=null},t.onInterstitialShown=function(){cc.director.pause(),cc.audioEngine.pauseAll(),this.interstitialShownCallback&&this.interstitialShownCallback(),this.interstitialShownCallback=null},t.onInterstitialClicked=function(){this.interstitialClickedCallback&&this.interstitialClickedCallback(),this.interstitialClickedCallback=null},t.onInterstitialDismissed=function(){cc.director.resume(),cc.audioEngine.resumeAll(),this.interstitialDismissedCallback&&this.interstitialDismissedCallback(),this.interstitialDismissedCallback=null},t.prepareRewardedAds=function(){switch(this._getPlatform()){case"android":jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","prepareRewardedAds","()V");break;case"ios":jsb.reflection.callStaticMethod("AdManager","prepareRewardedAds");break;case"browser":this._prepareHTML5RewardedAds();break;default:console.error("Not support ads for platform")}},t.hasRewardedAds=function(){if(this._isDebug)return!0;var e=!1;switch(this._getPlatform()){case"android":e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","hasRewardedAds","()Z");break;case"ios":e=jsb.reflection.callStaticMethod("AdManager","hasRewardedAds");break;case"browser":e=this._hasHTML5RewardedAds();break;default:console.error("Not support ads for platform"),e=!0}return e},t.showRewardedAds=function(e){if(e&&(this.rewardedAdLoadSuccessCallback=e.onRewardedAdLoadSuccess,this.rewardedAdLoadFailureCallback=e.onRewardedAdLoadFailure,this.rewardedAdStartedCallback=e.onRewardedAdStarted,this.rewardedAdShowErrorCallback=e.onRewardedAdShowError,this.rewardedAdClickedCallback=e.onRewardedAdClicked,this.rewardedAdClosedCallback=e.onRewardedAdClosed,this.rewardedAdCompletedCallback=e.onRewardedAdCompleted),this._isDebug)this.onRewardedAdCompleted();else switch(this._getPlatform()){case"android":jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","showRewardedAds","()V");break;case"ios":jsb.reflection.callStaticMethod("AdManager","showRewardedAds");break;case"browser":this._showHTML5RewardedAds({gameFeature:e.gameFeature});break;default:console.error("Not support ads for platform"),this.onRewardedAdClosed()}},t.onRewardedAdLoadSuccess=function(){this.rewardedAdLoadSuccessCallback&&this.rewardedAdLoadSuccessCallback(),this.rewardedAdLoadSuccessCallback=null},t.onRewardedAdLoadFailure=function(){cc.director.resume(),cc.audioEngine.resumeAll(),this.rewardedAdLoadFailureCallback&&this.rewardedAdLoadFailureCallback(),this._removeAllRewardedAdsCallback()},t.onRewardedAdStarted=function(){cc.director.pause(),cc.audioEngine.pauseAll(),this.rewardedAdStartedCallback&&this.rewardedAdStartedCallback(),this.rewardedAdStartedCallback=null},t.onRewardedAdShowError=function(){cc.director.resume(),cc.audioEngine.resumeAll(),this.rewardedAdShowErrorCallback&&this.rewardedAdShowErrorCallback(),this.rewardedAdShowErrorCallback=null},t.onRewardedAdClicked=function(){this.rewardedAdClickedCallback&&this.rewardedAdClickedCallback(),this.rewardedAdClickedCallback=null},t.onRewardedAdClosed=function(){cc.director.resume(),cc.audioEngine.resumeAll(),this.rewardedAdClosedCallback&&this.rewardedAdClosedCallback(),this._removeAllRewardedAdsCallback()},t.onRewardedAdCompleted=function(){cc.director.resume(),cc.audioEngine.resumeAll(),this.rewardedAdCompletedCallback&&this.rewardedAdCompletedCallback(),this.rewardedAdCompletedCallback=null},t._removeAllRewardedAdsCallback=function(){this.rewardedAdLoadSuccessCallback=null,this.rewardedAdLoadFailureCallback=null,this.rewardedAdStartedCallback=null,this.rewardedAdShowErrorCallback=null,this.rewardedAdClickedCallback=null,this.rewardedAdClosedCallback=null,this.rewardedAdCompletedCallback=null},t.showHTML5Intro=function(){h5ad.onStart({icon:this._getHTML5ResourceUrl("icon"),color:"rgb(133 122 236)",adBreakTimeout:3e3}),this._hasShowHTML5Intro=!0},t._prepareHTML5InterstitialAds=function(e){this._showHTML5InterstitialAds({type:e})},t._showHTML5InterstitialAds=function(){this.onInterstitialDismissed()},t._prepareHTML5RewardedAds=function(){var e=this;this._rewardedAdsFunc||(this._prepareRewardedAdsInterval&&clearInterval(this._prepareRewardedAdsInterval),this._prepareRewardedAdsInterval=null,this._prepareRewardedAdsInterval=setInterval(function(){GAMESNACKS.rewardedAdOpportunity({beforeReward:function(t){e._prepareRewardedAdsInterval&&clearInterval(e._prepareRewardedAdsInterval),e._prepareRewardedAdsInterval=null,e._rewardedAdsFunc=t,e.onRewardedAdLoadSuccess()},beforeBreak:function(){return e.onRewardedAdStarted()},adComplete:function(){return e.onRewardedAdCompleted()},adDismissed:function(){return e.onRewardedAdClosed()},afterBreak:function(){e._rewardedAdsFunc=null,e.onRewardedAdClosed(),e._prepareHTML5RewardedAds()}})},250))},t._showHTML5RewardedAds=function(e){var t=this;if(this._rewardedAdsFunc){clearInterval(this._retryRewardedAdsHTML5Process),this._retryRewardedAdsHTML5Count=0,this._rewardedAdsFunc();var n={adType:"RewardedAds"};n.gameFeature=e.gameFeature||"RewardedAds",i.gtaPushEvent("AdShowSuccess",n)}else this._retryRewardedAdsHTML5Process=setTimeout(function(){if(t._retryRewardedAdsHTML5Count+=1,t._retryRewardedAdsHTML5Count>2)return t._retryRewardedAdsHTML5Count=0,void t.onRewardedAdLoadFailure();t._showHTML5RewardedAds(e)},1e3)},t._hasHTML5RewardedAds=function(){return!!this._rewardedAdsFunc},t._getHTML5ResourceUrl=function(e){var t=cc.resources.getInfoWithPath(e),i=t.uuid;return t.nativeVer&&(i+="."+t.nativeVer),"./assets/resources/native/"+i.substr(0,2)+"/"+i+".png"},t._getPlatform=function(){if(cc.sys.isBrowser)return"browser";var e;switch(cc.sys.os){case cc.sys.OS_ANDROID:e="android";break;case cc.sys.OS_IOS:e="ios"}return e},e}();t.exports=new n,window.AdsHelper=e("AdsHelper"),cc._RF.pop()},{"./AnalyticHelper":"AnalyticHelper",AdsHelper:"AdsHelper"}],AnalyticHelper:[function(e,t){"use strict";cc._RF.push(t,"ba029JMP8NB6otyMZA5ca3B","AnalyticHelper"),t.exports={gtaInit:function(e,i){console.log("init:",e+" ** "+i);var n={gameId:e,version:t.exports.getGameVersion(),debugLog:!0,amplitude:{apiKey:i,debugLog:!0}};gcTurboAnalytics.init(n)},gtaSendBaseUserProperties:function(){var e=new Object;e.version=t.exports.getGameVersion(),gcTurboAnalytics.setUserProperties(e)},gtaSetUserProperties:function(e){e.version||(e.version=t.exports.getGameVersion()),gcTurboAnalytics.setUserProperties(e)},gtaPushEvent:function(e,i){i.gameName||(i.gameName=t.exports.getAppName()),gcTurboAnalytics.pushEvent(e,i)},getAppName:function(){return"MergeMelons"},getGameVersion:function(){return"1.0.0"},getWeblinkSource:function(){return document?document.referrer||document.URL:"Unknown"}},cc._RF.pop()},{}],EffectPlayer:[function(e,t){"use strict";cc._RF.push(t,"3f882wc0QhMH4Zvy9b4pYkl","EffectPlayer"),cc.Class({extends:cc.Component,properties:{greenFruitAnim:sp.Skeleton,redFruitAnim:sp.Skeleton,yellowFruitAnim:sp.Skeleton,orangeFruitAnim:sp.Skeleton,purpleFruitAnim:sp.Skeleton,isReady:!0},playGreenFx:function(){this.playFx(this.greenFruitAnim)},playRedFx:function(){this.playFx(this.redFruitAnim)},playYellowFx:function(){this.playFx(this.yellowFruitAnim)},playOrangeFx:function(){this.playFx(this.orangeFruitAnim)},playPurpleFx:function(){this.playFx(this.purpleFruitAnim)},playFx:function(e){var t=this;this.isReady=!1,e.setAnimation(0,"baozha",!1),setTimeout(function(){t.isReady=!0},1500)}}),cc._RF.pop()},{}],EffectSpawner:[function(e,t){"use strict";cc._RF.push(t,"718d2HkpDlBrpl5Hp5b460D","EffectSpawner");var i=e("./EffectPlayer");cc.Class({extends:cc.Component,properties:{fxPrefab:cc.Prefab,fxPool:[i]},showFruitFx:function(e,t,i){var n=this.getEffectPlayerInPool();if(n){var o=n.node.getComponent("EffectPlayer");return n.node.scale=i,n.node.position=t,0===e||9===e||10===e?o.playGreenFx():1===e?o.playPurpleFx():2===e||8===e?o.playOrangeFx():3===e||4===e?o.playRedFx():o.playYellowFx()}},getEffectPlayerInPool:function(){for(var e=!1,t=0;t<this.fxPool.length;t++){var i=this.fxPool[t];if(i.isReady)return e=!0,i}if(!e&&this.fxPool.length<10){var n=cc.instantiate(this.fxPrefab);n.parent=this.node;var o=n.getComponent("EffectPlayer");return this.fxPool.push(o),o}}}),cc._RF.pop()},{"./EffectPlayer":"EffectPlayer"}],FruitFactory:[function(e,t){"use strict";cc._RF.push(t,"5ba0biz2HhFDoXsCEnXEDtd","FruitFactory");var i=e("./../view/FruitView");cc.Class({extends:cc.Component,properties:{fruitPrefab:cc.Prefab},getFruit:function(){var e=this.getFruitLevel(),t=cc.instantiate(this.fruitPrefab);t.parent=this.node;var n=t.getComponent(i);return n.setLevel(e,this.mainGameCtrl),n},getFruitLevel:function(){return Math.floor(5*Math.random())}}),cc._RF.pop()},{"./../view/FruitView":"FruitView"}],FruitView:[function(e,t){"use strict";cc._RF.push(t,"a0bceyYXeBGmo7PDff9ZEb/","FruitView");var i=e("../controller/SoundManager");cc.Class({extends:cc.Component,properties:{rigidbody:cc.RigidBody,physicsCircleCollider:cc.PhysicsCircleCollider,fruitSprite:cc.Sprite,fruitScaleSizeByLevel:[cc.Float],fruitTexture:[cc.SpriteFrame],wildcardTexture:cc.SpriteFrame,fruitDefaultSize:15,fruitScaleSize:0,level:0,fruiDropSound:cc.AudioClip,smallFruiCombineSound:cc.AudioClip,mediumFruiCombineSound:cc.AudioClip,largeFruiCombineSound:cc.AudioClip},start:function(){this.node.scale=0,this.node.height=this.node.width=this.fruitDefaultSize,this.physicsCircleCollider.radius=this.fruitDefaultSize/2,this.rigidbody.type=cc.RigidBodyType.Static,this.limitRannge=.75*cc.winSize.height,this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},setLevel:function(e){this.level=e,this.fruitSprite.spriteFrame=this.fruitTexture[e],this.fruitScaleSize=this.fruitScaleSizeByLevel[e],this.physicsCircleCollider.tag=e,this.node.scale=this.fruitScaleSize},setMainGameCtrl:function(e){this.mainGameCtrl=e},dropDown:function(e,t){this.animateFruitMoveXAxis(e,t)},onBeginContact:function(e,t,i){if(this.isCompletedDropping){var n=i.node.getComponent("FruitView");if(!n||n.isCompletedDropping){if(this._hasCollideOther||9999===i.tag||(this._hasCollideOther=!0,this.node.dispatchEvent(new cc.Event.EventCustom("fruitcollideother",!0))),5e3===this.physicsCircleCollider.tag&&5e3!==i.tag&&9999!==i.tag&&8888!==i.tag&&i.tag<10)return this.rigidbody.enabledContactListener=!1,n.fuseFruit(),void this.destroyFruit();this.level===i.tag&&(this._isBeingFusion||i.tag>=10||(this._isBeingFusion=!0,n.destroyFruit(),this.fuseFruit()))}}},onTouchEnd:function(){this.isCompletedDropping&&(this.mainGameCtrl.isHammerActive?(this.mainGameCtrl.disableHammerPower(),this.playSoundByLevel(this.level),this.destroyFruit()):this.mainGameCtrl.isLightningActive&&(this.mainGameCtrl.disableLightningPower(),this.playSoundByLevel(this.level),this.mainGameCtrl.destroyAllFruitsWithLevel(this.level)))},destroyFruit:function(){var e=this;this.mainGameCtrl.effectSpawner.showFruitFx(this.level,this.node.position,this.node.scale),this.mainGameCtrl.destroyFruitInScreen(this.node.uuid),this._isBeingFusion=!1,this._countdown&&clearTimeout(this._countdown),setTimeout(function(){return e.node.removeFromParent()},0)},fuseFruit:function(){var e=this,t=this.level+1,i=new cc.Event.EventCustom("fruitcombine",!0);i.detail=t,this.node.dispatchEvent(i),this.setLevel(t),this.playSoundByLevel(t),this.mainGameCtrl.effectSpawner.showFruitFx(t-1,this.node.position,this.node.scale),this.animateFruitFusion(function(){return e._isBeingFusion=!1})},playSoundByLevel:function(e){return e<6?i.playSound(this.smallFruiCombineSound):e>=6&&e<9?i.playSound(this.mediumFruiCombineSound):i.playSound(this.largeFruiCombineSound)},setWildcard:function(){this.fruitSprite.spriteFrame=this.wildcardTexture,this.fruitScaleSize=this.fruitScaleSizeByLevel[1],this.physicsCircleCollider.tag=5e3,this.node.scale=this.fruitScaleSize},animateFruitMoveXAxis:function(e,t){var n=this,o=Math.min(Math.abs(this.node.x-e)/cc.winSize.width*1,.5);i.playSound(this.fruiDropSound),cc.tween(this.node).to(o,{x:{value:e,easing:"sineIn"}}).call(function(){n.isCompletedDropping=!0,n.rigidbody.type=cc.RigidBodyType.Dynamic}).start(),this.scheduleOnce(function(){var e=this.rigidbody.getMass();this.rigidbody.applyForceToCenter(new cc.Vec2(0,e/.4*-15e3),!0),t&&t()},o+.1)},animateFruitSpawn:function(e){this.node.scale=0,cc.tween(this.node).to(.25,{scale:{value:this.fruitScaleSize,easing:"sineIn"}}).call(function(){e&&e()}).start()},animateFruitFusion:function(e){this.node.scale=this.fruitScaleSizeByLevel[this.level-1],cc.tween(this.node).to(.15,{scale:{value:this.fruitScaleSize,easing:"sineIn"}}).call(function(){return e&&e()}).start()},animateExplosion:function(){this.node.removeFromParent()},animateWarning:function(){this._warningTween=cc.tween(this.node).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.RED,easing:"sineIn"}}).to(.5,{color:{value:cc.Color.WHITE,easing:"sineIn"}}).start()},update:function(){if(this._hasCollideOther)if(this.node.y+this.node.height*this.node.scale/2>this.limitRannge){if(this.isOverLimit)return;this.isOverLimit=!0,this.animateWarning(),this.startGameOverCountdown()}else{if(!this.isOverLimit)return;this.isOverLimit=!1,this._countdown&&clearTimeout(this._countdown),this.node.color=cc.Color.WHITE,this._warningTween&&this._warningTween.stop()}},startGameOverCountdown:function(){var e=this;this._countdown=setTimeout(function(){e&&e.node&&e.node.dispatchEvent(new cc.Event.EventCustom("fruitoverlimit",!0))},5e3)}}),cc._RF.pop()},{"../controller/SoundManager":"SoundManager"}],GameOverView:[function(e,t){"use strict";cc._RF.push(t,"8bdb57b1qhPi6G7a2iZ6SPo","GameOverView");var i=e("../controller/SoundManager");cc.Class({extends:cc.Component,properties:{clickSound:cc.AudioClip,winSound:cc.AudioClip,loseSound:cc.AudioClip,blockLayer:cc.Node,winPanel:cc.Node,losePanel:cc.Node,congratPanel:cc.Node,watchAdButton:cc.Node,continueButton:cc.Node,resetGameButton:cc.Node,reachScoreLabel:cc.Node,scoreLabel:cc.Label,levelLabel:cc.Label,goalFruitCount:cc.Label,goalFruit:cc.Sprite,fruitTexture:[cc.SpriteFrame],content:cc.Node,_popupStack:[]},_showGameWin:function(e){this.winPanel.active=!0,this.congratPanel.active=!1,this.reachScoreLabel.active=!1,this.scoreLabel.node.active=!1,this.levelLabel.string=e,this._showExcitedProfile()},_showCongratPanel:function(e,t){this.winPanel.active=!1,this.congratPanel.active=!0,this.reachScoreLabel.active=!0,this.scoreLabel.node.active=!1,this.goalFruit.spriteFrame=this.fruitTexture[e],this.goalFruit.node.x=0,this.goalFruitCount.node.active=t>1,t>1&&(this.goalFruit.node.x=-20,this.goalFruitCount.string="x"+t),this._showExcitedProfile()},_showGameLose:function(e,t){this.winPanel.active=!1,this.congratPanel.active=!1,this.losePanel.active=!0,this.watchAdButton.active=!1,this.reachScoreLabel.active=!0,this.scoreLabel.node.active=!0,this.scoreLabel.string=e,i.playSound(this.loseSound),this.resetGameButton.y=t?-350:-266,this.continueButton.active=!!t,this._showBasePopup()},_showBasePopup:function(){this.node.active=!0,this._animatePopupIn()},_showExcitedProfile:function(){this.watchAdButton.active=!0,this.losePanel.active=!1,i.playSound(this.winSound),this._showBasePopup()},showPopup:function(e){this.enqueuePopup(e),this.excutePopupStack()},enqueuePopup:function(e){if(!this._isLock){var t=e.name;this._popupStack.length>0&&t===this._popupStack[this._popupStack.length-1].name&&this._popupStack.pop(),this._popupStack.push(e)}},excutePopupStack:function(e){var t=this;if(void 0===e&&(e=0),0===this._popupStack.length)return this.node.active=!1,void(this._isShowingPopup=!1);this._isLock||this._isShowingPopup||(this._isShowingPopup=!0,this._popupExcuteTask=setTimeout(function(){var e=t._popupStack.pop();if(e)switch(e.name){case"gameWin":t._showGameWin(e.level);break;case"gameLose":t._showGameLose(e.score,e.canContinue);break;case"gameCongrat":t._showCongratPanel(e.fruitIndex,e.count);break;default:console.error("Do not define "+e.name+" in popup view")}},1e3*e))},onClosePopup:function(){var e=this;this._isShowingPopup=!1,this._animatePopupOut(function(){e.excutePopupStack()})},clearPopupStack:function(){this._popupStack=[],this._popupExcuteTask&&(clearTimeout(this._popupExcuteTask),this._popupExcuteTask=null)},setLockPopup:function(e){void 0===e&&(e=!0),this._isLock=e},_animatePopupIn:function(){var e=this;this._isShowingPopup=!0,this.blockLayer.active=!0,this.content.scale=0,cc.tween(this.content).to(.5,{scale:{value:1,easing:"backOut"}}).delay(.2).call(function(){e.blockLayer.active=!1}).start()},_animatePopupOut:function(e){var t=this;this.blockLayer.active=!0,this.content.scale=1,cc.tween(this.content).to(.5,{scale:{value:0,easing:"expoIn"}}).call(function(){t.winPanel.active=!1,t.losePanel.active=!1,t.congratPanel.active=!1,t._isShowingPopup=!1,e&&e()}).start()}}),cc._RF.pop()},{"../controller/SoundManager":"SoundManager"}],InGameReviewPopupView:[function(e,t){"use strict";cc._RF.push(t,"c00bc1Q0RVLAJNJNoqSlVgq","InGameReviewPopupView");var i=e("../controller/SoundManager");cc.Class({extends:cc.Component,properties:{content:cc.Node,clickSound:cc.AudioClip},showPrompt:function(){this.node.active=!0,this.content.scale=0,cc.tween(this.content).to(.5,{scale:{value:1,easing:"backOut"}}).start()},onLaterClicked:function(){var e=this;i.playSound(this.clickSound),cc.tween(this.content).to(.5,{scale:{value:0,easing:"expoIn"}}).call(function(){e.node.active=!1,e.content.scale=0}).start()},onRateClicked:function(){var e=this;switch(i.playSound(this.clickSound),cc.tween(this.content).to(.5,{scale:{value:0,easing:"expoIn"}}).call(function(){e.node.active=!1,e.content.scale=0}).start(),cc.sys.os){case cc.sys.OS_ANDROID:jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","openGameUrl","()V");break;case cc.sys.OS_IOS:jsb.reflection.callStaticMethod("AppController","openGameUrl")}}}),cc._RF.pop()},{"../controller/SoundManager":"SoundManager"}],IntroView:[function(e,t){"use strict";cc._RF.push(t,"64dd28Ng3dBOpBSrw2chJ+P","IntroView");var i=e("../utils/AdsHelper"),n=(e("../utils/AnalyticHelper"),e("../controller/SoundManager"));cc.Class({extends:cc.Component,properties:{clickSound:cc.AudioClip,loading:cc.Node,popup:e("./PopupView")},onLoad:function(){GAMESNACKS.gameReady()},onPlayClicked:function(){n.playSound(this.clickSound),this.loading.active=!0,cc.director.loadScene("mainGame")},onInterstitialClicked:function(){i.showInterstitial({onInterstitialDismissed:function(){console.log("good")}})},onRewardedClicked:function(){i.showRewardedAds()}}),cc._RF.pop()},{"../controller/SoundManager":"SoundManager","../utils/AdsHelper":"AdsHelper","../utils/AnalyticHelper":"AnalyticHelper","./PopupView":"PopupView"}],LineLimitView:[function(e,t){"use strict";cc._RF.push(t,"5848e+pJTFNY5UMtA1cyzYf","LineLimitView"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.width=cc.winSize.width,this.node.y=.75*cc.winSize.height-cc.winSize.height/2}}),cc._RF.pop()},{}],LocalizationLanguage:[function(e,t){"use strict";cc._RF.push(t,"e92efL6snlPMpOqDLYmU7uw","LocalizationLanguage");var i={en:{noFruit:"No fruits on screen",noAds:"No available ads",selectFruit:"Select a fruit to destroy",inGameReviewDes:"If you love our game, please take a moment to rate it",rate:"Rate",later:"Later"},jp:{noFruit:"\u753b\u9762\u306b\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u679c\u7269\u304c\u5fc5\u8981",noAds:"\u5229\u7528\u53ef\u80fd\u306a\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093",selectFruit:"\u7834\u58ca\u3059\u308b\u679c\u7269\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",inGameReviewDes:"\u3042\u306a\u305f\u304c\u79c1\u305f\u3061\u306e\u30b2\u30fc\u30e0\u3092\u611b\u3057\u3066\u3044\u308b\u306a\u3089\u3001\u305d\u308c\u3092\u8a55\u4fa1\u3059\u308b\u305f\u3081\u306b\u5c11\u3057\u6642\u9593\u3092\u53d6\u3063\u3066\u304f\u3060\u3055\u3044",rate:"\u8a55\u4fa1 ",later:"\u5f8c\u3067"}};t.exports={getLocalizeText:function(e){var t=window.gameLanguage||"en",n=i[t];return n?n[e]?n[e]:(console.error("Not define text["+e+"] for ["+t+"]"),""):(console.error("Not define language with countryCode["+t+"]"),"")}},cc._RF.pop()},{}],LocalizeAssetHelper:[function(e,t){"use strict";cc._RF.push(t,"3349dZYGStA2KHiYK0xKcx2","LocalizeAssetHelper");var i=e("./LocalizationLanguage"),n={en:0,jp:1};cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,label:cc.Label,localizeSprite:[cc.SpriteFrame],localizeTextId:cc.String},onLoad:function(){var e=window.gameLanguage||"en";this.sprite&&(this.sprite.spriteFrame=this.localizeSprite[n[e]]),this.label&&(this.label.string=i.getLocalizeText(this.localizeTextId))}}),cc._RF.pop()},{"./LocalizationLanguage":"LocalizationLanguage"}],MainGameController:[function(e,t){"use strict";cc._RF.push(t,"025812yNeBPSoW3kv06EGE0","MainGameController");var i=e("../view/FruitView"),n=e("../view/GameOverView"),o=e("../view/InGameReviewPopupView"),a=e("../view/PowerUpButtonView"),r=e("./EffectSpawner"),s=e("../utils/AdsHelper"),c=e("../view/ToastView"),d=e("../view/PopupView"),l=e("../controller/SoundManager"),u=e("../utils/LocalizationLanguage"),h=[5,6,7,8,9,10],p=[5,10,12],f="jp.co.digitalwill.mergemelons.bestscore";cc.Class({extends:cc.Component,properties:{inGameReviewPopupView:o,toast:c,loading:cc.Node,popup:d,effectSpawner:r,fruitPrefab:cc.Prefab,gameOver:n,fruitSpawnPos:cc.Vec2,progresssBar:cc.ProgressBar,progressBarValue:0,scoreLabel:cc.Label,score:0,bestScoreLabel:cc.Label,fruitTexture:[cc.SpriteFrame],fruitGoalSprite:cc.Sprite,fruitGoalIndex:0,maxFruitCounter:0,maxFruitGoal:1,maxFruitGoalLabel:cc.Label,level:1,levelLabel:cc.Label,life:1,hammerTips:cc.Node,isHammerActive:!1,lightningTips:cc.Node,isLightningActive:!1,powerUpUsageStocks:[cc.Integer],powerButtons:[a],reachTargetFruitSound:cc.AudioClip,clickSound:cc.AudioClip},onLoad:function(){this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.on("fruitcombine",this.onFruitCombine,this),this.node.on("fruitoverlimit",this.onFruitOverLimit,this),this.node.on("fruitcollideother",this.onFruitCollideOther,this),this.fruits={},this.resetGameProfile(),this.retryRewardedAdsCount=0,this.checkAvailableRewardedAds(),setTimeout(function(){e.createFruit()},500)},createFruit:function(){var e=this;if(this._canCreateFruit){var t=this.getFruit();this.fruits[t.node.uuid]=t,t.node.y=.84*cc.winSize.height,t.node.x=cc.winSize.width/2,t.animateFruitSpawn(function(){e._curFruitSelector=t,e._canCreateFruit=!1,e._canDragFruit=!0,e.isWildCardActive=!1})}},getFruit:function(){var e=this.getFruitLevel(),t=cc.instantiate(this.fruitPrefab);t.parent=this.node;var n=t.getComponent(i);return n.setLevel(e),n.setMainGameCtrl(this),n},getFruitLevel:function(){return Math.floor(4*Math.random())},destroyAllFruitsWithLevel:function(e){for(var t in this.fruits)this.fruits[t].isCompletedDropping&&this.fruits[t].level===e&&this.fruits[t].destroyFruit()},destroyAllFruitsOverLimit:function(){for(var e in this.fruits)this.fruits[e].isCompletedDropping&&this.fruits[e].isOverLimit&&this.fruits[e].destroyFruit()},destroyAllFruits:function(){for(var e in this.fruits)this.fruits[e].isCompletedDropping&&this.fruits[e].destroyFruit()},destroyFruitInScreen:function(e){this.fruits[e]&&delete this.fruits[e]},resetGameProfile:function(){this.level=1,this.levelLabel.string=1,this.score=0,this.scoreLabel.string=0;var e=~~cc.sys.localStorage.getItem(f);this.bestScoreLabel.string=""+e,this.progressBarValue=0,this.fruitGoalIndex=0,this._canCreateFruit=!0,this._isGameEnd=!1,this.life=1;for(var t=0;t<this.powerUpUsageStocks.length;t++)this.powerUpUsageStocks[t]=1},checkAvailableRewardedAds:function(){var e=this,t=s.hasRewardedAds();setTimeout(function(){for(var i=0;i<e.powerButtons.length;i++)e.powerButtons[i].setAdsAvailability(t,e.powerUpUsageStocks[i])},0),this.checkAvailableRewardedAdsHandler&&(clearTimeout(this.checkAvailableRewardedAdsHandler),this.checkAvailableRewardedAdsHandler=null),t?this.retryRewardedAdsCount=0:(this.retryRewardedAdsCount>0?(this.retryRewardedAdsCount=0,s.prepareRewardedAds()):this.retryRewardedAdsCount+=1,this.checkAvailableRewardedAdsHandler=setTimeout(function(){e.checkAvailableRewardedAds()},5e3))},onTouchEnd:function(e){this._canDragFruit&&this.dropFruit(e.getLocationX())},onTouchMove:function(e){this._canDragFruit&&this._curFruitSelector&&(this.isHammerActive||this.isLightningActive||(this._curFruitSelector.node.x=this.validatePositionX(e.getLocationX())))},onTouchCancel:function(e){this.dropFruit(e.getLocationX())},dropFruit:function(e){var t=this;this._curFruitSelector&&(this.isHammerActive||this.isLightningActive||(this._canCreateFruit=!1,this._canDragFruit=!1,this._curFruitSelector.dropDown(this.validatePositionX(e),function(){t._curFruitSelector=null})))},validatePositionX:function(e){var t=this._curFruitSelector.node.height*this._curFruitSelector.node.scale/2,i=t,n=this.node.width-t;return Math.max(i,Math.min(n,e))},onFruitCombine:function(e){var t=this;e.stopPropagation();var i=!1;this.score+=5*(e.detail-1)+10,this.scoreLabel.string=""+this.score;var n=~~cc.sys.localStorage.getItem(f);this.score>n&&(cc.sys.localStorage.setItem(f,this.score),this.bestScoreLabel.string=""+this.score);var o=this.getTargetScore(this.level);this.score<o?this.progressBarValue=(this.score-this.getTargetScore(this.level-1))/(o-this.getTargetScore(this.level-1)):(this.level+=1,this.levelLabel.string=""+this.level,this.progressBarValue=(this.score-this.getTargetScore(this.level-1))/(this.getTargetScore(this.level)-this.getTargetScore(this.level-1)),this.gameOver.enqueuePopup({name:"gameWin",level:this.level}),i=!0,GAMESNACKS.levelComplete(Math.max(this.level-1,1)),cc.sys.isBrowser||2!==this.level||setTimeout(function(){return t.inGameReviewPopupView.showPrompt()},450)),e.detail+1>h[this.fruitGoalIndex]&&(this.fruitGoalIndex=Math.min(this.fruitGoalIndex+1,h.length-1),this.fruitGoalSprite.spriteFrame=this.fruitTexture[h[this.fruitGoalIndex]],e.detail===h[h.length-1]?(this.maxFruitCounter+=1,this.maxFruitCounter>=this.maxFruitGoal&&(this.maxFruitGoal+=1,i=!0,this.gameOver.enqueuePopup({name:"gameCongrat",fruitIndex:h[h.length-1],count:this.maxFruitGoal-1})),this.maxFruitGoalLabel.node.active=!0,this.maxFruitGoalLabel.string="x"+this.maxFruitGoal):(i=!0,this.gameOver.enqueuePopup({name:"gameCongrat",fruitIndex:h[this.fruitGoalIndex-1],count:this.maxFruitGoal}))),i&&this.gameOver.excutePopupStack(.5)},getTargetScore:function(e){return 0===e?0:1===e?100:e>1&&e<11?50*e+this.getTargetScore(e-1):500*(e-10)+this.getTargetScore(e-1)},onFruitOverLimit:function(){this._isGameEnd||(this._isGameEnd=!0,GAMESNACKS.sendScore(this.score),GAMESNACKS.gameOver(),this.life>0?this.gameOver.showPopup({name:"gameLose",score:this.score,canContinue:!0}):this.gameOver.showPopup({name:"gameLose",score:this.score}))},onFruitCollideOther:function(e){e.stopPropagation(),this._canCreateFruit=!0,this.createFruit()},onWildCardPowerClicked:function(){var e=this;if(!this.isWildCardActive){if(!this.canActiveDestroyPower())return this.toast.showMessage(u.getLocalizeText("noFruit"));if(l.playSound(this.clickSound),0===this.powerUpUsageStocks[2])return this.loading.active=!0,void s.showRewardedAds({onRewardedAdCompleted:function(){e.powerUpUsageStocks[2]+=1,e.powerButtons[2].updateStock(e.powerUpUsageStocks[2]),e.loading.active=!1},onRewardedAdClosed:function(){e.loading.active=!1,e.checkAvailableRewardedAds()},onRewardedAdLoadFailure:function(){e.checkAvailableRewardedAds(),e.popup.showPopup(function(){return e.loading.active=!1})}});if(this._curFruitSelector){this.powerUpUsageStocks[2]=Math.max(0,this.powerUpUsageStocks[2]-1);var t=s.hasRewardedAds();this.powerButtons[2].setAdsAvailability(t,this.powerUpUsageStocks[2]),this._curFruitSelector.setWildcard(),this.isWildCardActive=!0}}},onHammerPowerClicked:function(){var e=this;if(!this.isLightningActive&&!this.isHammerActive){if(!this.canActiveDestroyPower())return this.toast.showMessage(u.getLocalizeText("noFruit"));if(l.playSound(this.clickSound),0===this.powerUpUsageStocks[0])return this.loading.active=!0,void s.showRewardedAds({onRewardedAdCompleted:function(){e.powerUpUsageStocks[0]+=1,e.powerButtons[0].updateStock(e.powerUpUsageStocks[0]),e.loading.active=!1},onRewardedAdClosed:function(){e.loading.active=!1,e.checkAvailableRewardedAds()},onRewardedAdLoadFailure:function(){e.checkAvailableRewardedAds(),e.popup.showPopup(function(){return e.loading.active=!1})}});this.powerUpUsageStocks[0]=Math.max(0,this.powerUpUsageStocks[0]-1);var t=s.hasRewardedAds();this.powerButtons[0].setAdsAvailability(t,this.powerUpUsageStocks[0]),this.hammerTips.active=!0,this.isHammerActive=!0}},onLightningPowerClicked:function(){var e=this;if(!this.isHammerActive&&!this.isLightningActive){if(!this.canActiveDestroyPower())return this.toast.showMessage(u.getLocalizeText("noFruit"));if(l.playSound(this.clickSound),0===this.powerUpUsageStocks[1])return this.loading.active=!0,void s.showRewardedAds({onRewardedAdCompleted:function(){e.powerUpUsageStocks[1]+=1,e.powerButtons[1].updateStock(e.powerUpUsageStocks[1]),e.loading.active=!1},onRewardedAdClosed:function(){e.loading.active=!1,e.checkAvailableRewardedAds()},onRewardedAdLoadFailure:function(){e.checkAvailableRewardedAds(),e.popup.showPopup(function(){return e.loading.active=!1})}});this.powerUpUsageStocks[1]=Math.max(0,this.powerUpUsageStocks[1]-1);var t=s.hasRewardedAds();this.powerButtons[1].setAdsAvailability(t,this.powerUpUsageStocks[1]),this.lightningTips.active=!0,this.isLightningActive=!0}},canActiveDestroyPower:function(){return 0!==this.getFruitCountInScreen()},getFruitCountInScreen:function(){var e=0;for(var t in this.fruits)this.fruits[t].isCompletedDropping&&(e+=1);return e},disableHammerPower:function(){var e=this;this.hammerTips.active=!1,setTimeout(function(){e.isHammerActive=!1},0)},disableLightningPower:function(){var e=this;this.lightningTips.active=!1,setTimeout(function(){e.isLightningActive=!1},0)},onContinueClicked:function(){var e=this;(this.level>12||p.indexOf(this.level)>-1)&&(this.loading.active=!0,cc.sys.isBrowser?12===this.level?s.showRewardedAds({gameFeature:"reward_stage12",onRewardedAdCompleted:function(){return e.loading.active=!1},onRewardedAdLoadFailure:function(){return e.loading.active=!1},onRewardedAdClosed:function(){return e.loading.active=!1}}):s.showInterstitial({gameFeature:"interst_stagechange",onInterstitialDismissed:function(){return e.loading.active=!1},onInterstitialFailed:function(){return e.loading.active=!1}}):s.showInterstitial({onInterstitialDismissed:function(){return e.loading.active=!1},onInterstitialFailed:function(){return e.loading.active=!1}}))},onClearAllFruitsClicked:function(){var e=this;this.loading.active=!0,s.showRewardedAds({gameFeature:"reward_continue",onRewardedAdCompleted:function(){e.destroyAllFruitsOverLimit(),e.life-=1,e._isGameEnd=!1,e._shouldRestartGame=!0,e.loading.active=!1},onRewardedAdLoadFailure:function(){return cc.director.loadScene("mainGame")},onRewardedAdClosed:function(){e._shouldRestartGame||cc.director.loadScene("mainGame")}})},onGameOverClicked:function(){this.loading.active=!0,cc.sys.isBrowser?s.showRewardedAds({gameFeature:"reward_replay",onRewardedAdCompleted:function(){return cc.director.loadScene("mainGame")},onRewardedAdLoadFailure:function(){return cc.director.loadScene("mainGame")},onRewardedAdClosed:function(){return cc.director.loadScene("mainGame")}}):s.showInterstitial({onInterstitialDismissed:function(){return cc.director.loadScene("mainGame")},onInterstitialFailed:function(){return cc.director.loadScene("mainGame")}})},onGetPowerUpClicked:function(){var e=this;this.loading.active=!0,s.showRewardedAds({gameFeature:"reward_items",onRewardedAdCompleted:function(){e.getRandomPowerUp(),e.loading.active=!1},onRewardedAdClosed:function(){e.loading.active=!1},onRewardedAdLoadFailure:function(){e.popup.showPopup(function(){return e.loading.active=!1})}})},getRandomPowerUp:function(){var e=Math.floor(3*Math.random());this.powerUpUsageStocks[e]+=1,this.powerButtons[e].updateStock(this.powerUpUsageStocks[e])},update:function(){this.progresssBar.progress=this.progressBarValue}}),cc._RF.pop()},{"../controller/SoundManager":"SoundManager","../utils/AdsHelper":"AdsHelper","../utils/LocalizationLanguage":"LocalizationLanguage","../view/FruitView":"FruitView","../view/GameOverView":"GameOverView","../view/InGameReviewPopupView":"InGameReviewPopupView","../view/PopupView":"PopupView","../view/PowerUpButtonView":"PowerUpButtonView","../view/ToastView":"ToastView","./EffectSpawner":"EffectSpawner"}],PlatformHelper:[function(e,t){"use strict";var i;cc._RF.push(t,"6c6feM0k09B/oS+IhdmOEDS","PlatformHelper"),i=cc.Enum({Top:0,Bottom:1,Left:2,Right:3}),cc.Class({extends:cc.Component,properties:{physicsBoxCollider:cc.PhysicsBoxCollider,state:i.Top},onLoad:function(){switch(this.state){case i.Top:this.physicsBoxCollider.size.width=cc.winSize.width,this.physicsBoxCollider.size.height=.2*cc.winSize.height,this.physicsBoxCollider.offset.y=.8*cc.winSize.height/2;case i.Bottom:this.physicsBoxCollider.size.width=cc.winSize.width,this.physicsBoxCollider.size.height=.162*cc.winSize.height,this.physicsBoxCollider.offset.y=-.848*cc.winSize.height/2;break;case i.Left:this.physicsBoxCollider.size.width=100,this.physicsBoxCollider.size.height=cc.winSize.height,this.physicsBoxCollider.offset.x=(cc.winSize.width+100)/2*-1;break;case i.Right:this.physicsBoxCollider.size.width=100,this.physicsBoxCollider.size.height=cc.winSize.height,this.physicsBoxCollider.offset.x=(cc.winSize.width+100)/2}}}),cc._RF.pop()},{}],PopupView:[function(e,t){"use strict";cc._RF.push(t,"e1a22IZDVRBsZXGbwXVQ3BX","PopupView"),cc.Class({extends:cc.Component,properties:{},showPopup:function(e){this.node.active=!0,this.callback=e},onOkClicked:function(){this.callback&&this.callback(),this.callback=null,this.node.active=!1}}),cc._RF.pop()},{}],PowerUpButtonView:[function(e,t){"use strict";cc._RF.push(t,"b02e7f0vVZLXYuo+QHWrsPs","PowerUpButtonView"),cc.Class({extends:cc.Component,properties:{adsIcon:cc.Node,stockIcon:cc.Node,stockCount:cc.Label,button:cc.Button,adAvailable:!1},onLoad:function(){this.adAvailable=!1},updateStock:function(e){var t=e>0;this.stockIcon.active=!this.adAvailable||t,this.adsIcon.active=!this.stockIcon.active,this.stockCount.string=""+e,this.button.interactable=this.adAvailable||e>0},setAdsAvailability:function(e,t){this.adAvailable=e,this.updateStock(t)}}),cc._RF.pop()},{}],ScreenAspectHelper:[function(e,t){"use strict";cc._RF.push(t,"bb3e4QSDZpOwovUiR8n4t9q","ScreenAspectHelper"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.winSize.height<cc.winSize.width?cc.Canvas.instance.fitHeight=!0:cc.Canvas.instance.fitWidth=!0,this.node.height=cc.winSize.height,this.node.y=cc.winSize.height/2}}),cc._RF.pop()},{}],SoundManager:[function(e,t){"use strict";cc._RF.push(t,"a090e3PZkVNzpG/19x61ieH","SoundManager");var i="jp.co.digitalwill.mergemelons.soundConfig",n=function(){function e(){var e=cc.sys.localStorage.getItem(i);null==e&&(e=!0),this.isSoundOn="true"===e}var t=e.prototype;return t.onSoundConfigToggle=function(){this.isSoundOn=!this.isSoundOn,cc.sys.localStorage.setItem(i,this.isSoundOn),cc.audioEngine.setMusicVolume(~~this.isSoundOn)},t.playSound=function(e){cc.audioEngine.play(e,!1,~~this.isSoundOn)},e}();t.exports=new n,cc._RF.pop()},{}],SoundToggle:[function(e,t){"use strict";cc._RF.push(t,"b4202ty3ENJA7mc77KDTEFp","SoundToggle");var i=e("./SoundManager");cc.Class({extends:cc.Component,properties:{buttonSprite:cc.Sprite,buttonTextures:[cc.SpriteFrame],clickSound:cc.AudioClip},onLoad:function(){var e=this;this._updateUi(),GAMESNACKS.subscribeToAudioUpdates(function(){return e.onSoundButtonClicked()})},onSoundButtonClicked:function(){i.playSound(this.clickSound),i.onSoundConfigToggle(),this._updateUi()},_updateUi:function(){var e=i.isSoundOn&&GAMESNACKS.isAudioEnabled()?1:0;this.buttonSprite.spriteFrame=this.buttonTextures[e]}}),cc._RF.pop()},{"./SoundManager":"SoundManager"}],ToastView:[function(e,t){"use strict";cc._RF.push(t,"1401d59XtlBg5IgR3WdR+2T","ToastView"),cc.Class({extends:cc.Component,properties:{message:cc.Label},onLoad:function(){this.message.string="",this.node.opacity=0},showMessage:function(e){this.message.string=e,this.node.opacity=255,this.node.y=0;var t=cc.tween;t(this.node).parallel(t().to(1,{opacity:{value:0,easing:"quintIn"}}),t().to(1,{position:{value:cc.v2(0,100),easing:"quintIn"}})).start()}}),cc._RF.pop()},{}],gamesnacks:[function(e,t){"use strict";cc._RF.push(t,"a3433mIJ75At7NGL3ooHKIe","gamesnacks"),function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i.r(t),i.d(t,"runGamesnacksDotTs",function(){return m}),i.d(t,"GAMESNACKS",function(){return S});var n,o,a={afgSdkUrl:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",publisherId:"ca-pub-5356814494732193",dataAdFrequencyHint:"120s",dataAdbreakTest:"on",preloadAdBreaks:"on"},r={type:"GAMESNACKS_ALLOW_REWARDED_ADS",value:!0,afgName:"testEnvironment"},s=["test","production"],c=function(){var e=this;this.isType=function(t,i){return!0===e.validateOrReturnError(t,i)}},d=function(e,t,i){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=o[n],r=a[0],s=a[1],c=l(e,r,s,i);if(!0!==c)return c}return!0},l=function(e,t,i,n){return typeof e[t]===i||n+' expects "'+t+'" property of type "'+i+'".'},u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),h={afgSdkUrl:"string",publisherId:"string",dataAdFrequencyHint:"string",dataAdbreakTest:"string",preloadAdBreaks:"string"},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validateOrReturnError=function(e,t){return"object"!=typeof e?t+' expects parameter of type "object".':void 0!==e.channelId&&"string"!=typeof e.channelId?t+' requires optional parameter channelId to be of type "string" if present.':d(e,h,t)},t}return u(t,e),t.instance=new t,t}(c),f={type:"string",value:"object"},g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validateOrReturnError=function(e,t){if("object"!=typeof e)return t+' expects parameter of type "object".';var i=d(e,f,t);return!0!==i?i:"GAMESNACKS_ADS_INITIALIZE"!==e.type?t+' expects property "type" to be "GAMESNACKS_ADS_INITIALIZE"':p.instance.validateOrReturnError(e.value,t)},t}u(t,e),t.instance=new t}(c),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w={beforeReward:"function",beforeBreak:"function",adComplete:"function",adDismissed:"function",afterBreak:"function"},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validateOrReturnError=function(e,t){return"object"!=typeof e?t+' expects parameter of type "object".':d(e,w,"rewardedAdOpportunity")},t}return g(t,e),t.instance=new t,t}(function(){var e=this;this.isType=function(t,i){var n=e.validateOrReturnError(t,i);return!0===n||(console.error(n),!1)}}),v=function(){function e(){this.listen=function(e,t){window.addEventListener("message",function(i){if("object"==typeof i.data){var n=i.data;n.type===e&&t(n)}})},this.send=function(e){parent.postMessage(JSON.stringify(e),"*")}}return e.instance=new e,e}(),m=function(){},S=new function(e){var t=this;this.environment="production",this.audioEnabled=!0,this.shouldAudioBeEnabledAfterAd=!0,this.isAdInProgress=!1,this.audioSubscribers=[],this.ghostDataSubscriber=null,this.adsInitialized=!1,this.rewardedAdsAllowed=!1,this.rewardedAdName="",this.forceVerbose=!1,this.sendScore=function(e,i){void 0===i&&(i={});var n={type:"GAMESNACKS_SCORE_MESSAGE",value:void 0,score:e,scoreMetadata:i};t.postMessageHandler.send(n)},this.gameOver=function(){t.postMessageHandler.send({type:"gameOver",value:!0})},this.isAudioEnabled=function(){return t.notifyGamesnacksOfAudioApiUsage(),t.audioEnabled},this.subscribeToAudioUpdates=function(e){t.notifyGamesnacksOfAudioApiUsage(),t.audioSubscribers.push(e)},this.notifyGamesnacksOfAudioApiUsage=function(){t.postMessageHandler.send({type:"GAMESNACKS_AUDIO_SUBCRIPTION",value:!0})},this.listenAndDelegateMessages=function(){t.postMessageHandler.listen("GAMESNACKS_AUDIO_UPDATE",t.handleAudioUpdates),t.postMessageHandler.listen("GAMESNACKS_ADS_INITIALIZE",t._initializeAds),t.postMessageHandler.listen("GAMESNACKS_ADS_AD_BREAK",t._adBreak),t.postMessageHandler.listen("GAMESNACKS_ALLOW_REWARDED_ADS",t._handleRewardedAdsAllowed),t.postMessageHandler.listen("GAMESNACKS_DECLARE_TEST_ENVIRONMENT",t._testEnvironment),t.postMessageHandler.listen("GAMESNACKS_DECLARE_VERBOSE_MODE",t._handleVerboseMode)},this._sendSdkLoadedMessage=function(){t.postMessageHandler.send({type:"GAMESNACKS_SDK_LOADED",value:!0})},this._initializeAds=function(e){var i=e.value;p.instance.isType(i,"GAMESNACKS_ADS_INITIALIZE")?t._initializeAdsWithValidatedConfig(i):t._logIfVerbose("Malformatted GS SDK request: initializeAds.")},this._initializeAdsWithValidatedConfig=function(e){if(t._logIfVerbose("initialize AdSense with config "+JSON.stringify(e,null,2)),!t.adsInitialized){t.adsInitialized=!0;var i=window.document.createElement("script");i.setAttribute("data-ad-client",e.publisherId),i.setAttribute("data-ad-frequency-hint",e.dataAdFrequencyHint),i.setAttribute("src",e.afgSdkUrl),"on"===e.dataAdbreakTest&&i.setAttribute("data-adbreak-test","on"),e.channelId&&i.setAttribute("data-ads-channel",e.channelId),window.document.head.appendChild(i),window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)},window.adConfig({preloadAdBreaks:e.preloadAdBreaks,sound:t._getAdconfigSoundParam(),EXPERIMENTAL_userInteractionChecks:"off"})}},this._getAdconfigSoundParam=function(){return t.audioEnabled?"on":"off"},this._adBreak=function(e){var i=e.value,n={type:i.type,name:i.name,beforeAd:t._beforeBreak,afterAd:t._afterBreak,adBreakDone:t._adBreakDone};t._logIfVerbose("calling adbreak."),window.adBreak&&window.adBreak(n)},this._beforeBreak=function(){t.postMessageHandler.send({type:"GAMESNACKS_ADS_BEFORE_BREAK",value:!0}),t.isAdInProgress=!0,t.shouldAudioBeEnabledAfterAd=t.audioEnabled,t._changeAudioAndUpdateSubscribers(!1)},this._afterBreak=function(){t.postMessageHandler.send({type:"GAMESNACKS_ADS_AFTER_BREAK",value:!0}),t.isAdInProgress=!1,t._changeAudioAndUpdateSubscribers(t.shouldAudioBeEnabledAfterAd)},this._adBreakDone=function(e){t._logIfVerbose("adbreakDone called with placementInfo: "+JSON.stringify(e)),t.postMessageHandler.send({type:"GAMESNACKS_ADS_AD_BREAK_DONE",value:e})},this._checkEnvironmentAttribute=function(){var e=document.currentScript&&document.currentScript.getAttribute("data-environment");"string"==typeof e&&(s.includes(e)||console.warn("GameSnacks SDK: Invalid value for data-environment attrbute: "+e),"test"===e&&t._testEnvironment())},this._testEnvironment=function(){t.environment="test",t._logIfVerbose("GameSnacks SDK is running in a test environment."),t._initializeAdsWithValidatedConfig(a),t._handleRewardedAdsAllowed(r),t.postMessageHandler.send({type:"GAMESNACKS_USING_TEST_ENVIRONMENT",value:!0})},this._handleRewardedAdsAllowed=function(){t.rewardedAdsAllowed=!0},this.rewardedAdOpportunity=function(e){if(A.instance.isType(e,"rewardedAdOpportunity")&&t.rewardedAdsAllowed){var i=t,n={type:"reward",name:t.rewardedAdName,beforeReward:function(t){e.beforeReward(function(){"test"===i.environment&&i._logIfVerbose("gsjs gsShowAdFn"),t(),i.postMessageHandler.send({type:"GAMESNACKS_SHOW_REWARDED_AD",value:!0})}),i.postMessageHandler.send({type:"GAMESNACKS_BEFORE_REWARD",value:!0})},beforeAd:function(){e.beforeBreak()},adViewed:function(){e.adComplete(),i.postMessageHandler.send({type:"GAMESNACKS_REWARDED_AD_COMPLETE",value:!0})},adDismissed:function(){e.adDismissed(),i.postMessageHandler.send({type:"GAMESNACKS_REWARDED_AD_DISMISSED",value:!0})},afterAd:function(){e.afterBreak()}};window.adBreak&&window.adBreak(n)}},this.handleAudioUpdates=function(e){var i;"boolean"==typeof e.isAudioEnabled&&(i=e.isAudioEnabled),"object"==typeof e.value&&"boolean"==typeof e.value.isAudioEnabled&&(i=e.value.isAudioEnabled),t.isAdInProgress?t.shouldAudioBeEnabledAfterAd=i:(t._changeAudioAndUpdateSubscribers(i),window.adConfig&&window.adConfig({sound:t._getAdconfigSoundParam()}))},this._changeAudioAndUpdateSubscribers=function(e){t.audioEnabled=e,t.updateAudioSubscribers()},this.updateAudioSubscribers=function(){t.audioSubscribers.forEach(function(e){e(t.audioEnabled)})},this._subscribeToGhostData=function(e){t.ghostDataSubscriber=e;var i=t;window.addEventListener("message",function(e){e&&e.data&&"GAMESNACKS_RECEIVE_GHOST_DATA"===e.data.type&&i.ghostDataSubscriber(e.data.value)},!1),t.postMessageHandler.send({type:"GAMESNACKS_SUBSCRIBE_TO_GHOST_DATA",value:!0})},this._gameOverWithGhost=function(e){t.postMessageHandler.send({type:"GAMESNACKS_GAME_OVER_WITH_GHOST",value:e})},this.gameReady=function(){t.postMessageHandler.send({type:"GAMESNACKS_GAME_READY",value:Date.now()})},this.levelComplete=function(e){t.postMessageHandler.send({type:"GAMESNACKS_LEVEL_COMPLETE",value:e})},this._handleVerboseMode=function(){t.forceVerbose=!0,t._logIfVerbose("Entering verbose mode.")},this._isVerbose=function(){return!0===t.forceVerbose||"test"===t.environment},this._logIfVerbose=function(e){t._isVerbose()&&console.log("GameSnacks SDK: "+e)},this.postMessageHandler=e,this._checkEnvironmentAttribute(),this.listenAndDelegateMessages(),this._sendSdkLoadedMessage()}(v.instance);window.GAMESNACKS=S}]),cc._RF.pop()},{}]},{},["EffectPlayer","EffectSpawner","FruitFactory","MainGameController","SoundManager","SoundToggle","gamesnacks","AdsHelper","AnalyticHelper","LocalizationLanguage","LocalizeAssetHelper","PlatformHelper","ScreenAspectHelper","FruitView","GameOverView","InGameReviewPopupView","IntroView","LineLimitView","PopupView","PowerUpButtonView","ToastView"]);